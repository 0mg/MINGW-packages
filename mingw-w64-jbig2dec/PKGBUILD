# Maintainer: J. Peter Mugaas <jpmugaas@suddenlink.net>

_realname=jbig2dec
pkgbase=mingw-w64-${_realname}
pkgname=("${MINGW_PACKAGE_PREFIX}-${_realname}")
pkgver=0.15
_gsver=gs924
pkgrel=1
pkgdesc='Decoder implementation of the JBIG2 image compression format (mingw-w64)'
url='https://jbig2dec.com/'
arch=('any')
license=('GPL3')
depends=("${MINGW_PACKAGE_PREFIX}-libpng")
source=("https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/${_gsver}/${_realname}-${pkgver}.tar.gz")
sha256sums=('6bfa1af72de37c7929315933a1ba696540d860936ad98f9de02fc725d7e53854')

build() {
	cd "${srcdir}/"
        [[ -d "${srcdir}"/build-${CARCH} ]] && rm -rf "${srcdir}"/build-${CARCH}
        cp -r ${_realname}-${pkgver} "${srcdir}"/build-${CARCH} && cd "${srcdir}"/build-${CARCH}

	./autogen.sh --prefix=${MINGW_PREFIX} \
           --host=${MINGW_CHOST} \
           --target=${MINGW_CHOST} \
           --build=${MINGW_CHOST}
	make
}

package() {
	cd "${srcdir}/build-${CARCH}"
	make DESTDIR="${pkgdir}" install
}
